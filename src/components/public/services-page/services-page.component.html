<!-- Chatbot for authenticated users -->
<app-chatbot
  mode="services"
  [showLoginButtons]="true"
  (productSelected)="onProductSelected($event)">
</app-chatbot>

<!-- Services list - shown alongside chatbot for authenticated users or as main content for non-authenticated -->
<div class="bg-background">
  <div class="container mx-auto px-4 py-12 md:py-16">
    <div class="text-center mb-10">
      <h1 class="text-4xl md:text-5xl font-bold">Nuestros Servicios Profesionales</h1>
      <p class="text-lg text-muted-foreground max-w-3xl mx-auto mt-4">
        Desde mantenimiento preventivo hasta reparaciones complejas, nuestro equipo de expertos está aquí para asegurar que tu motocicleta funcione a la perfección.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      @for (service of services(); track service.id) {
        <div class="bg-card rounded-xl border border-border shadow-sm flex flex-col overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
          <div class="p-6 flex-grow">
            <h2 class="text-xl font-semibold text-primary">{{ service.title }}</h2>
            <p class="text-muted-foreground mt-2 text-sm flex-grow min-h-[60px]">{{ service.description }}</p>
          </div>
          <div class="p-6 bg-secondary/30 border-t border-border space-y-3">
             <p class="text-2xl font-bold text-center">{{ formatCurrency(service.price) }}</p>
            <div class="flex flex-col sm:flex-row gap-3">
              <a [routerLink]="appointmentLink()" class="w-full text-center px-4 py-2 bg-primary text-primary-foreground rounded-md font-medium hover:bg-primary/90 text-sm">
                Agendar Cita
              </a>
              <a href="https://wa.me/573128247162?text=Hola,%20quisiera%20consultar%20sobre%20el%20servicio:%20{{service.title}}" target="_blank" rel="noopener noreferrer" class="w-full text-center px-4 py-2 bg-secondary text-secondary-foreground rounded-md font-medium hover:bg-secondary/80 text-sm">
                Consultar por WhatsApp
              </a>
            </div>
          </div>
        </div>
      } @empty {
        <p class="col-span-full text-center text-muted-foreground py-16">No hay servicios disponibles en este momento.</p>
      }
    </div>
  </div>
</div>
